<?php class PedidopackHelper extends Helper{        var $statuspedido = array(        '1' => 'Criado',        '2' => 'Verificando Pagamento',        '3' => 'Em entrega',        '4' => 'Cancelado',        '5' => 'Não autorizado',        '6' => 'Autorizado',        '7' => 'Completado'    );        function exibe_historico($pedido){        $html = '';                $statuspedido_atual = 0;                if(count($pedido['Pedidohistorico'])){                        $html .= '<table style="width:100%" class="tabela_detalhe"><tr><td class="destaque">Descrição</td><td class="destaque" style="width: 162px;"> Data</td></tr>';                        foreach($pedido['Pedidohistorico'] as $historico){                //if($historico['statuspedido_id'] != $statuspedido_atual){                    $data_historico = date('d/m/Y H:i:s', strtotime($historico['created']));                                        $html .= '                        <tr>                            <td>Status: '.$this->statuspedido[$historico['statuspedido_id']].'<br/>'.$historico['descricao'].'</td>                            <td> '.$data_historico.'</td>                        </tr>                        ';                    $statuspedido_atual = $historico['statuspedido_id'];                //}            }                        $html .= '</table>';        }        return $html;    }}?>